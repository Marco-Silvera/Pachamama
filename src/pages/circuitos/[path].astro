---
import HeroCircuito from "../../components/HeroCircuito.astro";
import ViajeAMedida from "../../components/ViajeAMedida.astro";
import Guia from "../../components/Guia.astro";
import Experiencias from "../../components/Experiencias.astro";
import FeaturedImageGallery from "../../components/FeaturedImageGallery.jsx";
import circuitosData from "../../db/circuitos.json";
import experienciasData from "../../db/experiencias.json";
import Layout from "../../layouts/Layout.astro";
import Tab from "../../components/Tab.astro";

const { path } = Astro.params;
const circuito = circuitosData.find((c) => c.path === path);

export function getStaticPaths() {
  const paths = circuitosData.map((circuito) => ({
    params: { path: circuito.path },
  }));

  return paths;
}

const experiencias = experienciasData.find((e) => e.nombre === path);
const images = experiencias ? experiencias.imagenes : [];
---

<Layout title={circuito.nombre}>
  <HeroCircuito
    imagen={circuito.imagenes[1]}
    nombre={circuito.nombre}
    descripcion={circuito.descripcion}
  />

  <Tab circuito={circuito} />

  <FeaturedImageGallery images={images} />

  <Guia />
  <ViajeAMedida />
</Layout>
