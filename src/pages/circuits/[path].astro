---
import HeroCircuito from "../../components/es/HeroCircuito.astro";
import Guia from "../../components/es/Guia.astro";
// import Experiencias from "../../components/Experiencias.astro";

import alternativasData from "../../db/fr/alternativas.json";
import circuitosData from "../../db/es/circuitos.json";
import circuitosDatafr from "../../db/fr/circuitos.json";
import experienciasData from "../../db/fr/experiencias.json";
import Tab from "../../components/fr/Tab";
import { FeaturedImageGallery } from "../../components/es/FeaturedImageGallery.jsx";
import Francia from "../../components/es/Francia.astro";
import LayoutFr from "../../layouts/LayoutFr.astro";

const { path } = Astro.params;
const circuito = circuitosDatafr.find((c) => c.path === path);

// Encontrar la ruta equivalente en espaÃ±ol
const circuitoEs = circuitosData.find((c) => c.nombre === circuito.nombre);

export function getStaticPaths() {
  const paths = circuitosDatafr.map((circuito) => ({
    params: { path: circuito.path },
  }));

  return paths;
}

// Buscamos las imagenes segun el path
const experiencias = experienciasData.find((e) => e.nombre === path);
const images = experiencias ? experiencias.imagenes : [];
---

<LayoutFr
  title={circuito.nombre}
  rutaEsp={circuitoEs ? `/circuitos/${circuitoEs.path}` : "#"}
  rutaFr={circuito.path}
>
  <Francia />
  <HeroCircuito
    imagen={circuito.imagenes[1]}
    nombre={circuito.nombre}
    descripcion={circuito.descripcion}
  />

  <Tab circuito={circuito} client:load />

  <Guia />

  <FeaturedImageGallery images={images} client:load />
</LayoutFr>
